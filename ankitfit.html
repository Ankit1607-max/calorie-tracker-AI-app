<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ANKITFIT - AI Calorie Tracker</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html5-qrcode/2.3.8/html5-qrcode.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Jost:wght@300;400;500;600;700&family=Quicksand:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Jost', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 25%, #f093fb 50%, #f5576c 75%, #4facfe 100%);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
            min-height: 100vh;
            color: #ffffff;
            overflow-x: hidden;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .logo {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
            font-weight: 400;
        }

        .nav-tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-radius: 15px;
            padding: 10px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .nav-tab {
            padding: 12px 20px;
            background: transparent;
            border: none;
            color: #ffffff;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            font-family: 'Quicksand', sans-serif;
        }

        .nav-tab.active {
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        .nav-tab:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .card {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 25px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
        }

        .card-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 20px;
            color: #ffffff;
            text-align: center;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #ffffff;
        }

        .form-input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.1);
            color: #ffffff;
            font-size: 16px;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .form-input::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }

        .form-input:focus {
            outline: none;
            border-color: #4ecdc4;
            box-shadow: 0 0 20px rgba(78, 205, 196, 0.3);
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            font-size: 16px;
            transition: all 0.3s ease;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            color: white;
            margin: 5px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        .btn-secondary {
            background: linear-gradient(45deg, #667eea, #764ba2);
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: #4ecdc4;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .search-container {
            position: relative;
            margin-bottom: 20px;
        }

        .search-input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.1);
            color: #ffffff;
            font-size: 16px;
        }

        .search-results {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 10px;
            max-height: 300px;
            overflow-y: auto;
            z-index: 1000;
            display: none;
        }

        .search-item {
            padding: 12px 15px;
            cursor: pointer;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
            color: #333;
        }

        .search-item:hover {
            background: rgba(78, 205, 196, 0.1);
        }

        .history-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .workout-plan {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .workout-day {
            margin-bottom: 20px;
        }

        .workout-day h4 {
            color: #4ecdc4;
            margin-bottom: 10px;
            font-size: 1.2rem;
        }

        .exercise-list {
            list-style: none;
            padding-left: 15px;
        }

        .exercise-list li {
            margin-bottom: 8px;
            padding: 8px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 5px;
        }

        .diet-plan {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .meal-section {
            margin-bottom: 15px;
        }

        .meal-section h4 {
            color: #ff6b6b;
            margin-bottom: 8px;
        }

        .qr-scanner {
            text-align: center;
            padding: 20px;
        }

        #qr-reader {
            width: 100%;
            max-width: 400px;
            margin: 0 auto;
        }

        .step-counter {
            text-align: center;
            font-size: 3rem;
            font-weight: 700;
            color: #4ecdc4;
            margin: 20px 0;
        }

        .water-tracker {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin: 20px 0;
        }

        .water-glass {
            width: 60px;
            height: 80px;
            background: rgba(78, 205, 196, 0.3);
            border: 2px solid #4ecdc4;
            border-radius: 10px;
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .water-glass.filled {
            background: linear-gradient(to top, #4ecdc4 0%, rgba(78, 205, 196, 0.7) 100%);
        }

        .water-glass:hover {
            transform: scale(1.1);
        }

        .chart-container {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
        }

        .credits {
            text-align: center;
            padding: 30px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            margin-top: 40px;
        }

        .credits h3 {
            font-size: 1.5rem;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .nav-tabs {
                flex-direction: column;
            }
            
            .grid {
                grid-template-columns: 1fr;
            }
            
            .logo {
                font-size: 2rem;
            }
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(45deg, #4ecdc4, #44a08d);
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            z-index: 1000;
            display: none;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from { transform: translateX(100%); }
            to { transform: translateX(0); }
        }

        .theme-switcher {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-radius: 50px;
            padding: 10px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .theme-btn {
            background: none;
            border: none;
            color: white;
            padding: 8px 12px;
            border-radius: 20px;
            cursor: pointer;
            margin: 0 2px;
            transition: all 0.3s ease;
        }

        .theme-btn.active {
            background: rgba(255, 255, 255, 0.2);
        }
    </style>
</head>
<body>
    <div class="theme-switcher">
        <button class="theme-btn active" onclick="setTheme('gradient')">ðŸŒˆ</button>
        <button class="theme-btn" onclick="setTheme('dark')">ðŸŒ™</button>
        <button class="theme-btn" onclick="setTheme('ocean')">ðŸŒŠ</button>
    </div>

    <div class="notification" id="notification"></div>

    <div class="container">
        <header class="header">
            <h1 class="logo">ANKITFIT</h1>
            <p class="subtitle">AI-Powered Fitness & Nutrition Tracker</p>
        </header>

        <nav class="nav-tabs">
            <button class="nav-tab active" onclick="showTab('profile')">Profile</button>
            <button class="nav-tab" onclick="showTab('calories')">Calories</button>
            <button class="nav-tab" onclick="showTab('workout')">Workout</button>
            <button class="nav-tab" onclick="showTab('water')">Water</button>
            <button class="nav-tab" onclick="showTab('steps')">Steps</button>
            <button class="nav-tab" onclick="showTab('bmi')">BMI</button>
            <button class="nav-tab" onclick="showTab('scanner')">Scanner</button>
            <button class="nav-tab" onclick="showTab('plans')">Plans</button>
            <button class="nav-tab" onclick="showTab('analytics')">Analytics</button>
        </nav>

        <!-- Profile Tab -->
        <div class="tab-content active" id="profile">
            <div class="card">
                <h2 class="card-title">Personal Information</h2>
                <div class="form-group">
                    <label class="form-label">Name</label>
                    <input type="text" class="form-input" id="userName" placeholder="Enter your name">
                </div>
                <div class="form-group">
                    <label class="form-label">Age</label>
                    <input type="number" class="form-input" id="userAge" placeholder="Enter your age">
                </div>
                <div class="form-group">
                    <label class="form-label">Height (cm)</label>
                    <input type="number" class="form-input" id="userHeight" placeholder="Enter your height">
                </div>
                <div class="form-group">
                    <label class="form-label">Weight (kg)</label>
                    <input type="number" class="form-input" id="userWeight" placeholder="Enter your weight">
                </div>
                <div class="form-group">
                    <label class="form-label">Goal</label>
                    <select class="form-input" id="userGoal">
                        <option value="lose">Lose Weight</option>
                        <option value="maintain">Maintain Weight</option>
                        <option value="gain">Gain Weight</option>
                    </select>
                </div>
                <button class="btn" onclick="saveProfile()">Save Profile</button>
            </div>
        </div>

        <!-- Calories Tab -->
        <div class="tab-content" id="calories">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="caloriesConsumed">0</div>
                    <div class="stat-label">Consumed</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="caloriesBurned">0</div>
                    <div class="stat-label">Burned</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="netCalories">0</div>
                    <div class="stat-label">Net Calories</div>
                </div>
            </div>

            <div class="grid">
                <div class="card">
                    <h3 class="card-title">Add Food</h3>
                    <div class="search-container">
                        <input type="text" class="search-input" id="foodSearch" placeholder="Search for food..." oninput="searchFood(this.value)">
                        <div class="search-results" id="foodResults"></div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Quantity (grams)</label>
                        <input type="number" class="form-input" id="foodQuantity" placeholder="Enter quantity">
                    </div>
                    <button class="btn" onclick="addFood()">Add Food</button>
                </div>

                <div class="card">
                    <h3 class="card-title">Today's Food</h3>
                    <div id="foodHistory"></div>
                </div>
            </div>
        </div>

        <!-- Workout Tab -->
        <div class="tab-content" id="workout">
            <div class="grid">
                <div class="card">
                    <h3 class="card-title">Add Exercise</h3>
                    <div class="search-container">
                        <input type="text" class="search-input" id="exerciseSearch" placeholder="Search for exercise..." oninput="searchExercise(this.value)">
                        <div class="search-results" id="exerciseResults"></div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Duration (minutes)</label>
                        <input type="number" class="form-input" id="exerciseDuration" placeholder="Enter duration">
                    </div>
                    <button class="btn" onclick="addExercise()">Add Exercise</button>
                </div>

                <div class="card">
                    <h3 class="card-title">Today's Workouts</h3>
                    <div id="workoutHistory"></div>
                </div>
            </div>
        </div>

        <!-- Water Tab -->
        <div class="tab-content" id="water">
            <div class="card">
                <h3 class="card-title">Water Intake Tracker</h3>
                <div class="stat-card">
                    <div class="stat-value" id="waterCount">0</div>
                    <div class="stat-label">Glasses (250ml each)</div>
                </div>
                <div class="water-tracker" id="waterTracker">
                    <!-- Water glasses will be generated here -->
                </div>
                <div style="text-align: center; margin-top: 20px;">
                    <button class="btn" onclick="addWater()">Add Glass</button>
                    <button class="btn btn-secondary" onclick="resetWater()">Reset</button>
                </div>
            </div>
        </div>

        <!-- Steps Tab -->
        <div class="tab-content" id="steps">
            <div class="card">
                <h3 class="card-title">Step Counter</h3>
                <div class="step-counter" id="stepCount">0</div>
                <div class="stat-card">
                    <div class="stat-value" id="stepCalories">0</div>
                    <div class="stat-label">Calories Burned</div>
                </div>
                <div style="text-align: center; margin-top: 20px;">
                    <button class="btn" onclick="startStepCounter()">Start Tracking</button>
                    <button class="btn btn-secondary" onclick="resetSteps()">Reset</button>
                </div>
            </div>
        </div>

        <!-- BMI Tab -->
        <div class="tab-content" id="bmi">
            <div class="card">
                <h3 class="card-title">BMI Calculator</h3>
                <div class="stat-card">
                    <div class="stat-value" id="bmiValue">--</div>
                    <div class="stat-label" id="bmiCategory">Calculate BMI</div>
                </div>
                <button class="btn" onclick="calculateBMI()">Calculate BMI</button>
            </div>
        </div>

        <!-- Scanner Tab -->
        <div class="tab-content" id="scanner">
            <div class="card">
                <h3 class="card-title">Food Barcode Scanner</h3>
                <div class="qr-scanner">
                    <div id="qr-reader"></div>
                    <button class="btn" onclick="startScanner()">Start Scanner</button>
                    <button class="btn btn-secondary" onclick="stopScanner()">Stop Scanner</button>
                </div>
            </div>
        </div>

        <!-- Plans Tab -->
        <div class="tab-content" id="plans">
            <div class="grid">
                <div class="card">
                    <h3 class="card-title">Workout Plans</h3>
                    <div class="nav-tabs" style="margin-bottom: 20px;">
                        <button class="nav-tab active" onclick="showWorkoutPlan('ppl')">Push/Pull/Legs</button>
                        <button class="nav-tab" onclick="showWorkoutPlan('bro')">Bro Split</button>
                    </div>
                    
                    <div id="pplPlan" class="workout-plan">
                        <div class="workout-day">
                            <h4>PUSH DAY (Chest, Shoulders, Triceps)</h4>
                            <ul class="exercise-list">
                                <li>Flat Barbell Bench Press - 4 sets x 5-8 reps</li>
                                <li>Incline Dumbbell Press - 3 sets x 8-12 reps</li>
                                <li>Overhead Shoulder Press - 3 sets x 6-10 reps</li>
                                <li>Lateral Raises - 3 sets x 12-15 reps</li>
                                <li>Triceps Dips (Weighted) - 3 sets x 8-12 reps</li>
                                <li>Cable Triceps Pushdown - 3 sets x 12-15 reps</li>
                            </ul>
                        </div>
                        <div class="workout-day">
                            <h4>PULL DAY (Back, Biceps, Rear Delts)</h4>
                            <ul class="exercise-list">
                                <li>Deadlifts - 4 sets x 3-6 reps</li>
                                <li>Pull-Ups (Weighted) - 3 sets x 6-10 reps</li>
                                <li>Bent-Over Barbell Rows - 3 sets x 8-12 reps</li>
                                <li>Face Pulls - 3 sets x 12-15 reps</li>
                                <li>Barbell/Dumbbell Curls - 3 sets x 8-12 reps</li>
                                <li>Hammer Curls - 3 sets x 10-12 reps</li>
                            </ul>
                        </div>
                        <div class="workout-day">
                            <h4>LEG DAY (Quads, Hamstrings, Glutes, Calves)</h4>
                            <ul class="exercise-list">
                                <li>Squats (Back/Front) - 4 sets x 5-8 reps</li>
                                <li>Romanian Deadlifts - 3 sets x 8-12 reps</li>
                                <li>Bulgarian Split Squats - 3 sets x 8-10 reps/leg</li>
                                <li>Leg Press - 3 sets x 10-15 reps</li>
                                <li>Seated/Standing Calf Raises - 4 sets x 12-20 reps</li>
                                <li>Leg Curls - 3 sets x 12-15 reps</li>
                            </ul>
                        </div>
                    </div>

                    <div id="broPlan" class="workout-plan" style="display: none;">
                        <div class="workout-day">
                            <h4>Day 1: Chest</h4>
                            <ul class="exercise-list">
                                <li>Flat Barbell Bench Press - 4 sets x 6-10 reps</li>
                                <li>Incline Dumbbell Press - 3 sets x 8-12 reps</li>
                                <li>Dumbbell Flyes - 3 sets x 12-15 reps</li>
                                <li>Cable Crossover - 3 sets x 12-15 reps</li>
                                <li>Dips (Weighted) - 3 sets x 8-12 reps</li>
                            </ul>
                        </div>
                        <div class="workout-day">
                            <h4>Day 2: Back</h4>
                            <ul class="exercise-list">
                                <li>Pull-Ups (Weighted) - 4 sets x 6-10 reps</li>
                                <li>Bent-Over Barbell Rows - 3 sets x 8-12 reps</li>
                                <li>Lat Pulldown (Wide Grip) - 3 sets x 10-12 reps</li>
                                <li>Seated Cable Row - 3 sets x 10-12 reps</li>
                                <li>Deadlifts - 3 sets x 5-8 reps</li>
                            </ul>
                        </div>
                        <div class="workout-day">
                            <h4>Day 3: Shoulders</h4>
                            <ul class="exercise-list">
                                <li>Overhead Press - 4 sets x 6-10 reps</li>
                                <li>Lateral Raises - 4 sets x 12-15 reps</li>
                                <li>Front Plate Raises - 3 sets x 12 reps</li>
                                <li>Rear Delt Flyes - 3 sets x 12-15 reps</li>
                                <li>Shrugs - 3 sets x 12-15 reps</li>
                            </ul>
                        </div>
                        <div class="workout-day">
                            <h4>Day 4: Arms (Biceps + Triceps)</h4>
                            <ul class="exercise-list">
                                <li>Barbell Curls - 4 sets x 8-12 reps</li>
                                <li>Preacher Curls - 3 sets x 10-12 reps</li>
                                <li>Hammer Curls - 3 sets x 10-12 reps</li>
                                <li>Skull Crushers - 3 sets x 8-12 reps</li>
                                <li>Triceps Rope Pushdown - 3 sets x 12-15 reps</li>
                                <li>Close-Grip Bench Press - 3 sets x 8-10 reps</li>
                            </ul>
                        </div>
                        <div class="workout-day">
                            <h4>Day 5: Legs</h4>
                            <ul class="exercise-list">
                                <li>Squats - 4 sets x 6-10 reps</li>
                                <li>Romanian Deadlifts - 3 sets x 8-12 reps</li>
                                <li>Leg Press - 3 sets x 10-15 reps</li>
                                <li>Leg Curls - 3 sets x 12-15 reps</li>
                                <li>Calf Raises - 4 sets x 15-20 reps</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">Diet Plans</h3>
                    <div class="nav-tabs" style="margin-bottom: 20px;">
                        <button class="nav-tab active" onclick="showDietPlan('fatloss')">Fat Loss</button>
                        <button class="nav-tab" onclick="showDietPlan('muscle')">Muscle Building</button>
                        <button class="nav-tab" onclick="showDietPlan('protein')">High Protein</button>
                    </div>

                    <div id="fatlossDiet" class="diet-plan">
                        <div class="meal-section">
                            <h4>Breakfast (400-500 calories)</h4>
                            <p>â€¢ 3 egg whites + 1 whole egg scrambled<br>
                            â€¢ 1 slice whole grain toast<br>
                            â€¢ 1/2 avocado<br>
                            â€¢ Green tea</p>
                        </div>
                        <div class="meal-section">
                            <h4>Mid-Morning Snack (150-200 calories)</h4>
                            <p>â€¢ Greek yogurt (100g)<br>
                            â€¢ Handful of berries</p>
                        </div>
                        <div class="meal-section">
                            <h4>Lunch (450-550 calories)</h4>
                            <p>â€¢ Grilled chicken breast (150g)<br>
                            â€¢ Large salad with olive oil dressing<br>
                            â€¢ 1/2 cup quinoa</p>
                        </div>
                        <div class="meal-section">
                            <h4>Afternoon Snack (100-150 calories)</h4>
                            <p>â€¢ Apple with 1 tbsp almond butter</p>
                        </div>
                        <div class="meal-section">
                            <h4>Dinner (400-500 calories)</h4>
                            <p>â€¢ Baked salmon (120g)<br>
                            â€¢ Steamed broccoli<br>
                            â€¢ Sweet potato (100g)</p>
                        </div>
                    </div>

                    <div id="muscleDiet" class="diet-plan" style="display: none;">
                        <div class="meal-section">
                            <h4>Breakfast (600-700 calories)</h4>
                            <p>â€¢ 4 whole eggs + 2 egg whites<br>
                            â€¢ 2 slices whole grain toast<br>
                            â€¢ 1 banana<br>
                            â€¢ Protein shake (whey)</p>
                        </div>
                        <div class="meal-section">
                            <h4>Mid-Morning Snack (300-400 calories)</h4>
                            <p>â€¢ Oatmeal with peanut butter<br>
                            â€¢ Mixed nuts (30g)</p>
                        </div>
                        <div class="meal-section">
                            <h4>Lunch (700-800 calories)</h4>
                            <p>â€¢ Grilled chicken breast (200g)<br>
                            â€¢ Brown rice (1 cup cooked)<br>
                            â€¢ Mixed vegetables<br>
                            â€¢ Olive oil dressing</p>
                        </div>
                        <div class="meal-section">
                            <h4>Pre-Workout (200-300 calories)</h4>
                            <p>â€¢ Banana with honey<br>
                            â€¢ Coffee</p>
                        </div>
                        <div class="meal-section">
                            <h4>Post-Workout (400-500 calories)</h4>
                            <p>â€¢ Protein shake with milk<br>
                            â€¢ 2 slices whole grain bread</p>
                        </div>
                        <div class="meal-section">
                            <h4>Dinner (600-700 calories)</h4>
                            <p>â€¢ Lean beef (150g)<br>
                            â€¢ Quinoa (1 cup cooked)<br>
                            â€¢ Steamed vegetables<br>
                            â€¢ Avocado</p>
                        </div>
                    </div>

                    <div id="proteinDiet" class="diet-plan" style="display: none;">
                        <div class="meal-section">
                            <h4>Breakfast (500-600 calories)</h4>
                            <p>â€¢ Protein pancakes (3 eggs + protein powder)<br>
                            â€¢ Greek yogurt (150g)<br>
                            â€¢ Berries</p>
                        </div>
                        <div class="meal-section">
                            <h4>Mid-Morning (200-250 calories)</h4>
                            <p>â€¢ Protein shake<br>
                            â€¢ Almonds (20g)</p>
                        </div>
                        <div class="meal-section">
                            <h4>Lunch (600-700 calories)</h4>
                            <p>â€¢ Turkey breast (200g)<br>
                            â€¢ Quinoa salad<br>
                            â€¢ Chickpeas (100g)</p>
                        </div>
                        <div class="meal-section">
                            <h4>Afternoon Snack (250-300 calories)</h4>
                            <p>â€¢ Cottage cheese (150g)<br>
                            â€¢ Walnuts (15g)</p>
                        </div>
                        <div class="meal-section">
                            <h4>Dinner (550-650 calories)</h4>
                            <p>â€¢ Grilled fish (180g)<br>
                            â€¢ Lentils (100g cooked)<br>
                            â€¢ Green vegetables</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Analytics Tab -->
        <div class="tab-content" id="analytics">
            <div class="card">
                <h3 class="card-title">Weekly Progress</h3>
                <div class="chart-container">
                    <canvas id="calorieChart"></canvas>
                </div>
            </div>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="weeklyAvgCalories">0</div>
                    <div class="stat-label">Avg Daily Calories</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="weeklyWorkouts">0</div>
                    <div class="stat-label">Workouts This Week</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="weeklyWater">0</div>
                    <div class="stat-label">Avg Water (L/day)</div>
                </div>
            </div>
        </div>

        <div class="credits">
            <h3>Designed by Ankit Chaudhary</h3>
            <p>AI-Powered Fitness & Nutrition Tracker</p>
        </div>
    </div>

    <script>
        // Gemini API Configuration
        const GEMINI_API_KEY = 'AIzaSyAxaBZs2E5kLFPJYl075geDYqSxUeEqm4A';
        const GEMINI_API_URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=${GEMINI_API_KEY}`;

        // Data Storage
        let userData = {
            name: '',
            age: 0,
            height: 0,
            weight: 0,
            goal: 'maintain'
        };

        let dailyData = {
            calories: { consumed: 0, burned: 0 },
            water: 0,
            steps: 0,
            foods: [],
            exercises: []
        };

        // Food Database (200+ items)
        const foodDatabase = [
            {name: 'Apple', calories: 52}, {name: 'Banana', calories: 89}, {name: 'Orange', calories: 47},
            {name: 'Grapes', calories: 62}, {name: 'Strawberries', calories: 32}, {name: 'Blueberries', calories: 57},
            {name: 'Mango', calories: 60}, {name: 'Pineapple', calories: 50}, {name: 'Watermelon', calories: 30},
            {name: 'Avocado', calories: 160}, {name: 'Broccoli', calories: 34}, {name: 'Spinach', calories: 23},
            {name: 'Carrots', calories: 41}, {name: 'Tomatoes', calories: 18}, {name: 'Cucumber', calories: 16},
            {name: 'Bell Pepper', calories: 31}, {name: 'Onion', calories: 40}, {name: 'Garlic', calories: 149},
            {name: 'Potato', calories: 77}, {name: 'Sweet Potato', calories: 86}, {name: 'Rice', calories: 130},
            {name: 'Brown Rice', calories: 111}, {name: 'Quinoa', calories: 120}, {name: 'Oats', calories: 68},
            {name: 'Bread', calories: 265}, {name: 'Whole Wheat Bread', calories: 247}, {name: 'Pasta', calories: 131},
            {name: 'Chicken Breast', calories: 165}, {name: 'Chicken Thigh', calories: 209}, {name: 'Turkey', calories: 135},
            {name: 'Beef', calories: 250}, {name: 'Pork', calories: 242}, {name: 'Salmon', calories: 208},
            {name: 'Tuna', calories: 132}, {name: 'Cod', calories: 105}, {name: 'Shrimp', calories: 99},
            {name: 'Eggs', calories: 155}, {name: 'Milk', calories: 42}, {name: 'Greek Yogurt', calories: 59},
            {name: 'Cheese', calories: 113}, {name: 'Butter', calories: 717}, {name: 'Olive Oil', calories: 884},
            {name: 'Almonds', calories: 579}, {name: 'Walnuts', calories: 654}, {name: 'Peanuts', calories: 567},
            {name: 'Cashews', calories: 553}, {name: 'Peanut Butter', calories: 588}, {name: 'Honey', calories: 304},
            {name: 'Sugar', calories: 387}, {name: 'Dark Chocolate', calories: 546}, {name: 'Ice Cream', calories: 207},
            {name: 'Pizza', calories: 266}, {name: 'Burger', calories: 540}, {name: 'French Fries', calories: 365},
            {name: 'Coca Cola', calories: 42}, {name: 'Beer', calories: 43}, {name: 'Wine', calories: 83},
            {name: 'Coffee', calories: 1}, {name: 'Green Tea', calories: 1}, {name: 'Orange Juice', calories: 45},
            {name: 'Lemon', calories: 17}, {name: 'Lime', calories: 20}, {name: 'Grapefruit', calories: 32},
            {name: 'Peach', calories: 39}, {name: 'Pear', calories: 57}, {name: 'Cherry', calories: 50},
            {name: 'Plum', calories: 39}, {name: 'Kiwi', calories: 61}, {name: 'Papaya', calories: 43},
            {name: 'Coconut', calories: 354}, {name: 'Dates', calories: 282}, {name: 'Raisins', calories: 299},
            {name: 'Cabbage', calories: 25}, {name: 'Lettuce', calories: 15}, {name: 'Celery', calories: 14},
            {name: 'Asparagus', calories: 20}, {name: 'Green Beans', calories: 31}, {name: 'Peas', calories: 81},
            {name: 'Corn', calories: 86}, {name: 'Mushrooms', calories: 22}, {name: 'Eggplant', calories: 25},
            {name: 'Zucchini', calories: 17}, {name: 'Cauliflower', calories: 25}, {name: 'Brussels Sprouts', calories: 43},
            {name: 'Kale', calories: 35}, {name: 'Arugula', calories: 25}, {name: 'Radish', calories: 16},
            {name: 'Beets', calories: 43}, {name: 'Turnip', calories: 28}, {name: 'Parsnip', calories: 75},
            {name: 'Lentils', calories: 116}, {name: 'Black Beans', calories: 132}, {name: 'Kidney Beans', calories: 127},
            {name: 'Chickpeas', calories: 164}, {name: 'Soybeans', calories: 173}, {name: 'Tofu', calories: 76},
            {name: 'Tempeh', calories: 190}, {name: 'Hummus', calories: 166}, {name: 'Tahini', calories: 595},
            {name: 'Sesame Seeds', calories: 573}, {name: 'Sunflower Seeds', calories: 584}, {name: 'Pumpkin Seeds', calories: 559},
            {name: 'Chia Seeds', calories: 486}, {name: 'Flax Seeds', calories: 534}, {name: 'Hemp Seeds', calories: 553},
            {name: 'Coconut Oil', calories: 892}, {name: 'Avocado Oil', calories: 884}, {name: 'Canola Oil', calories: 884},
            {name: 'Vegetable Oil', calories: 884}, {name: 'Margarine', calories: 717}, {name: 'Cream', calories: 345},
            {name: 'Sour Cream', calories: 198}, {name: 'Cottage Cheese', calories: 98}, {name: 'Ricotta Cheese', calories: 174},
            {name: 'Mozzarella', calories: 280}, {name: 'Cheddar Cheese', calories: 403}, {name: 'Parmesan', calories: 431},
            {name: 'Feta Cheese', calories: 264}, {name: 'Blue Cheese', calories: 353}, {name: 'Goat Cheese', calories: 364},
            {name: 'Cream Cheese', calories: 342}, {name: 'Yogurt', calories: 59}, {name: 'Kefir', calories: 41},
            {name: 'Buttermilk', calories: 40}, {name: 'Skim Milk', calories: 34}, {name: 'Whole Milk', calories: 61},
            {name: 'Almond Milk', calories: 15}, {name: 'Soy Milk', calories: 33}, {name: 'Oat Milk', calories: 47},
            {name: 'Coconut Milk', calories: 230}, {name: 'Rice Milk', calories: 47}, {name: 'Goat Milk', calories: 69},
            {name: 'Duck', calories: 337}, {name: 'Lamb', calories: 294}, {name: 'Venison', calories: 158},
            {name: 'Rabbit', calories: 173}, {name: 'Liver', calories: 175}, {name: 'Bacon', calories: 541},
            {name: 'Ham', calories: 163}, {name: 'Sausage', calories: 346}, {name: 'Hot Dog', calories: 290},
            {name: 'Pepperoni', calories: 494}, {name: 'Salami', calories: 336}, {name: 'Prosciutto', calories: 315},
            {name: 'Crab', calories: 97}, {name: 'Lobster', calories: 77}, {name: 'Scallops', calories: 69},
            {name: 'Mussels', calories: 73}, {name: 'Oysters', calories: 59}, {name: 'Clams', calories: 74},
            {name: 'Squid', calories: 92}, {name: 'Octopus', calories: 82}, {name: 'Anchovies', calories: 210},
            {name: 'Sardines', calories: 185}, {name: 'Mackerel', calories: 262}, {name: 'Herring', calories: 246},
            {name: 'Trout', calories: 190}, {name: 'Bass', calories: 105}, {name: 'Halibut', calories: 111},
            {name: 'Mahi Mahi', calories: 109}, {name: 'Swordfish', calories: 121}, {name: 'Tilapia', calories: 96},
            {name: 'Catfish', calories: 229}, {name: 'Flounder', calories: 70}, {name: 'Sole', calories: 70},
            {name: 'Barley', calories: 123}, {name: 'Bulgur', calories: 83}, {name: 'Buckwheat', calories: 92},
            {name: 'Millet', calories: 119}, {name: 'Amaranth', calories: 103}, {name: 'Teff', calories: 101},
            {name: 'Spelt', calories: 127}, {name: 'Kamut', calories: 132}, {name: 'Farro', calories: 170},
            {name: 'Wild Rice', calories: 101}, {name: 'Jasmine Rice', calories: 121}, {name: 'Basmati Rice', calories: 121},
            {name: 'Arborio Rice', calories: 130}, {name: 'Black Rice', calories: 356}, {name: 'Red Rice', calories: 405},
            {name: 'Noodles', calories: 138}, {name: 'Spaghetti', calories: 131}, {name: 'Macaroni', calories: 131},
            {name: 'Penne', calories: 131}, {name: 'Fusilli', calories: 131}, {name: 'Linguine', calories: 131},
            {name: 'Angel Hair', calories: 131}, {name: 'Lasagna', calories: 135}, {name: 'Ravioli', calories: 175},
            {name: 'Gnocchi', calories: 130}, {name: 'Couscous', calories: 112}, {name: 'Orzo', calories: 344},
            {name: 'Ramen', calories: 436}, {name: 'Soba', calories: 99}, {name: 'Udon', calories: 99},
            {name: 'Rice Noodles', calories: 192}, {name: 'Shirataki', calories: 10}, {name: 'Zucchini Noodles', calories: 20},
            {name: 'Bagel', calories: 245}, {name: 'English Muffin', calories: 134}, {name: 'Croissant', calories: 231},
            {name: 'Muffin', calories: 377}, {name: 'Donut', calories: 452}, {name: 'Danish', calories: 266},
            {name: 'Scone', calories: 362}, {name: 'Biscuit', calories: 358}, {name: 'Pancakes', calories: 227},
            {name: 'Waffles', calories: 291}, {name: 'French Toast', calories: 166}, {name: 'Cereal', calories: 379},
            {name: 'Granola', calories: 471}, {name: 'Oatmeal', calories: 68}, {name: 'Porridge', calories: 68},
            {name: 'Muesli', calories: 367}, {name: 'Bran Flakes', calories: 305}, {name: 'Corn Flakes', calories: 357},
            {name: 'Rice Krispies', calories: 386}, {name: 'Cheerios', calories: 367}, {name: 'Granola Bar', calories: 471},
            {name: 'Energy Bar', calories: 456}, {name: 'Protein Bar', calories: 456}, {name: 'Crackers', calories: 502},
            {name: 'Pretzels', calories: 380}, {name: 'Popcorn', calories: 375}, {name: 'Chips', calories: 536},
            {name: 'Tortilla Chips', calories: 515}, {name: 'Pita Chips', calories: 426}, {name: 'Rice Cakes', calories: 382},
            {name: 'Cookies', calories: 502}, {name: 'Brownies', calories: 466}, {name: 'Cake', calories: 257},
            {name: 'Cheesecake', calories: 321}, {name: 'Pie', calories: 237}, {name: 'Tart', calories: 264},
            {name: 'Pudding', calories: 158}, {name: 'Jello', calories: 62}, {name: 'Custard', calories: 122},
            {name: 'Mousse', calories: 447}, {name: 'Tiramisu', calories: 240}, {name: 'Gelato', calories: 160},
            {name: 'Sorbet', calories: 132}, {name: 'Frozen Yogurt', calories: 127}, {name: 'Popsicle', calories: 47}
        ];

        // Exercise Database (200+ items)
        const exerciseDatabase = [
            {name: 'Running', caloriesPerMin: 10}, {name: 'Walking', caloriesPerMin: 4}, {name: 'Cycling', caloriesPerMin: 8},
            {name: 'Swimming', caloriesPerMin: 11}, {name: 'Jump Rope', caloriesPerMin: 12}, {name: 'Burpees', caloriesPerMin: 14},
            {name: 'Push-ups', caloriesPerMin: 7}, {name: 'Pull-ups', caloriesPerMin: 8}, {name: 'Squats', caloriesPerMin: 6},
            {name: 'Lunges', caloriesPerMin: 6}, {name: 'Planks', caloriesPerMin: 5}, {name: 'Mountain Climbers', caloriesPerMin: 9},
            {name: 'High Knees', caloriesPerMin: 8}, {name: 'Jumping Jacks', caloriesPerMin: 8}, {name: 'Boxing', caloriesPerMin: 13},
            {name: 'Kickboxing', caloriesPerMin: 12}, {name: 'HIIT', caloriesPerMin: 15}, {name: 'CrossFit', caloriesPerMin: 14},
            {name: 'Yoga', caloriesPerMin: 3}, {name: 'Pilates', caloriesPerMin: 4}, {name: 'Weight Lifting', caloriesPerMin: 6},
            {name: 'Bench Press', caloriesPerMin: 6}, {name: 'Deadlifts', caloriesPerMin: 8}, {name: 'Overhead Press', caloriesPerMin: 6},
            {name: 'Rows', caloriesPerMin: 6}, {name: 'Bicep Curls', caloriesPerMin: 4}, {name: 'Tricep Dips', caloriesPerMin: 5},
            {name: 'Leg Press', caloriesPerMin: 5}, {name: 'Calf Raises', caloriesPerMin: 3}, {name: 'Lat Pulldown', caloriesPerMin: 5},
            {name: 'Chest Fly', caloriesPerMin: 4}, {name: 'Shoulder Shrugs', caloriesPerMin: 3}, {name: 'Hip Thrusts', caloriesPerMin: 5},
            {name: 'Romanian Deadlifts', caloriesPerMin: 7}, {name: 'Bulgarian Split Squats', caloriesPerMin: 7}, {name: 'Face Pulls', caloriesPerMin: 4},
            {name: 'Lateral Raises', caloriesPerMin: 3}, {name: 'Front Raises', caloriesPerMin: 3}, {name: 'Hammer Curls', caloriesPerMin: 4},
            {name: 'Skull Crushers', caloriesPerMin: 4}, {name: 'Cable Pushdowns', caloriesPerMin: 4}, {name: 'Preacher Curls', caloriesPerMin: 4},
            {name: 'Incline Press', caloriesPerMin: 6}, {name: 'Decline Press', caloriesPerMin: 6}, {name: 'Dumbbell Flyes', caloriesPerMin: 4},
            {name: 'Cable Crossovers', caloriesPerMin: 4}, {name: 'Pec Deck', caloriesPerMin: 4}, {name: 'Machine Press', caloriesPerMin: 5},
            {name: 'Leg Curls', caloriesPerMin: 4}, {name: 'Leg Extensions', caloriesPerMin: 4}, {name: 'Seated Calf Raises', caloriesPerMin: 3},
            {name: 'Standing Calf Raises', caloriesPerMin: 3}, {name: 'Hack Squats', caloriesPerMin: 6}, {name: 'Front Squats', caloriesPerMin: 7},
            {name: 'Goblet Squats', caloriesPerMin: 6}, {name: 'Sumo Deadlifts', caloriesPerMin: 8}, {name: 'Stiff Leg Deadlifts', caloriesPerMin: 7},
            {name: 'Good Mornings', caloriesPerMin: 5}, {name: 'Glute Bridges', caloriesPerMin: 4}, {name: 'Single Leg Deadlifts', caloriesPerMin: 6},
            {name: 'Step Ups', caloriesPerMin: 5}, {name: 'Wall Sits', caloriesPerMin: 4}, {name: 'Jump Squats', caloriesPerMin: 8},
            {name: 'Plyometric Lunges', caloriesPerMin: 8}, {name: 'Box Jumps', caloriesPerMin: 10}, {name: 'Broad Jumps', caloriesPerMin: 9},
            {name: 'Vertical Jumps', caloriesPerMin: 8}, {name: 'Tuck Jumps', caloriesPerMin: 9}, {name: 'Star Jumps', caloriesPerMin: 8},
            {name: 'Split Jumps', caloriesPerMin: 8}, {name: 'Lunge Jumps', caloriesPerMin: 8}, {name: 'Squat Jumps', caloriesPerMin: 8},
            {name: 'Basketball', caloriesPerMin: 8}, {name: 'Football', caloriesPerMin: 9}, {name: 'Soccer', caloriesPerMin: 9},
            {name: 'Tennis', caloriesPerMin: 8}, {name: 'Badminton', caloriesPerMin: 6}, {name: 'Table Tennis', caloriesPerMin: 4},
            {name: 'Volleyball', caloriesPerMin: 6}, {name: 'Baseball', caloriesPerMin: 5}, {name: 'Golf', caloriesPerMin: 4},
            {name: 'Hockey', caloriesPerMin: 10}, {name: 'Rugby', caloriesPerMin: 10}, {name: 'Cricket', caloriesPerMin: 5},
            {name: 'Squash', caloriesPerMin: 12}, {name: 'Racquetball', caloriesPerMin: 11}, {name: 'Handball', caloriesPerMin: 10},
            {name: 'Bowling', caloriesPerMin: 3}, {name: 'Billiards', caloriesPerMin: 2}, {name: 'Darts', caloriesPerMin: 2},
            {name: 'Hiking', caloriesPerMin: 6}, {name: 'Rock Climbing', caloriesPerMin: 11}, {name: 'Mountaineering', caloriesPerMin: 10},
            {name: 'Kayaking', caloriesPerMin: 7}, {name: 'Canoeing', caloriesPerMin: 5}, {name: 'Rowing', caloriesPerMin: 9},
            {name: 'Sailing', caloriesPerMin: 3}, {name: 'Surfing', caloriesPerMin: 4}, {name: 'Water Skiing', caloriesPerMin: 7},
            {name: 'Jet Skiing', caloriesPerMin: 5}, {name: 'Scuba Diving', caloriesPerMin: 7}, {name: 'Snorkeling', caloriesPerMin: 5},
            {name: 'Fishing', caloriesPerMin: 2}, {name: 'Hunting', caloriesPerMin: 3}, {name: 'Archery', caloriesPerMin: 3},
            {name: 'Horseback Riding', caloriesPerMin: 4}, {name: 'Skateboarding', caloriesPerMin: 5}, {name: 'Rollerblading', caloriesPerMin: 7},
            {name: 'Ice Skating', caloriesPerMin: 6}, {name: 'Skiing', caloriesPerMin: 8}, {name: 'Snowboarding', caloriesPerMin: 7},
            {name: 'Cross Country Skiing', caloriesPerMin: 12}, {name: 'Sledding', caloriesPerMin: 5}, {name: 'Snow Shoeing', caloriesPerMin: 8},
            {name: 'Dancing', caloriesPerMin: 5}, {name: 'Ballet', caloriesPerMin: 4}, {name: 'Ballroom Dancing', caloriesPerMin: 4},
            {name: 'Hip Hop Dancing', caloriesPerMin: 6}, {name: 'Jazz Dancing', caloriesPerMin: 5}, {name: 'Tap Dancing', caloriesPerMin: 5},
            {name: 'Zumba', caloriesPerMin: 7}, {name: 'Aerobics', caloriesPerMin: 6}, {name: 'Step Aerobics', caloriesPerMin: 7},
            {name: 'Water Aerobics', caloriesPerMin: 4}, {name: 'Spinning', caloriesPerMin: 11}, {name: 'Stationary Bike', caloriesPerMin: 7},
            {name: 'Elliptical', caloriesPerMin: 8}, {name: 'Treadmill', caloriesPerMin: 8}, {name: 'Stair Climber', caloriesPerMin: 9},
            {name: 'Rowing Machine', caloriesPerMin: 9}, {name: 'Battle Ropes', caloriesPerMin: 10},
            {name: 'Tire Flips', caloriesPerMin: 12}, {name: 'Sledgehammer', caloriesPerMin: 11}, {name: 'Farmers Walk', caloriesPerMin: 6},
            {name: 'Sled Push', caloriesPerMin: 10}, {name: 'Sled Pull', caloriesPerMin: 9}, {name: 'Kettlebell Swings', caloriesPerMin: 12},
            {name: 'Turkish Get-ups', caloriesPerMin: 6}, {name: 'Clean and Press', caloriesPerMin: 8}, {name: 'Snatches', caloriesPerMin: 9},
            {name: 'Thrusters', caloriesPerMin: 10}, {name: 'Wall Balls', caloriesPerMin: 8}, {name: 'Medicine Ball Slams', caloriesPerMin: 9}
        ];

        let html5QrCode;
        let stepCounter = 0;
        let chart;

        // Tab Navigation
        function showTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Remove active class from all nav tabs
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected tab
            document.getElementById(tabName).classList.add('active');
            
            // Add active class to clicked nav tab
            event.target.classList.add('active');
            
            // Initialize chart if analytics tab is shown
            if (tabName === 'analytics') {
                initChart();
            }
        }

        // Profile Functions
        function saveProfile() {
            userData.name = document.getElementById('userName').value;
            userData.age = parseInt(document.getElementById('userAge').value);
            userData.height = parseInt(document.getElementById('userHeight').value);
            userData.weight = parseInt(document.getElementById('userWeight').value);
            userData.goal = document.getElementById('userGoal').value;
            
            localStorage.setItem('ankitfit_profile', JSON.stringify(userData));
            showNotification('Profile saved successfully!');
        }

        function loadProfile() {
            const saved = localStorage.getItem('ankitfit_profile');
            if (saved) {
                userData = JSON.parse(saved);
                document.getElementById('userName').value = userData.name;
                document.getElementById('userAge').value = userData.age;
                document.getElementById('userHeight').value = userData.height;
                document.getElementById('userWeight').value = userData.weight;
                document.getElementById('userGoal').value = userData.goal;
            }
        }

        // Food Functions
        function searchFood(query) {
            const results = document.getElementById('foodResults');
            if (query.length < 2) {
                results.style.display = 'none';
                return;
            }
            
            const matches = foodDatabase.filter(food => 
                food.name.toLowerCase().includes(query.toLowerCase())
            ).slice(0, 10);
            
            results.innerHTML = matches.map(food => 
                `<div class="search-item" onclick="selectFood('${food.name}', ${food.calories})">${food.name} - ${food.calories} cal/100g</div>`
            ).join('');
            
            results.style.display = matches.length > 0 ? 'block' : 'none';
        }

        function selectFood(name, calories) {
            document.getElementById('foodSearch').value = name;
            document.getElementById('foodResults').style.display = 'none';
            
            // Store selected food data
            window.selectedFood = { name, calories };
        }

        async function addFood() {
            const foodName = document.getElementById('foodSearch').value;
            const quantity = parseInt(document.getElementById('foodQuantity').value);
            
            if (!foodName || !quantity) {
                showNotification('Please enter food name and quantity');
                return;
            }
            
            let calories = 0;
            
            // Check if food is in database
            const foodItem = foodDatabase.find(f => f.name.toLowerCase() === foodName.toLowerCase());
            if (foodItem) {
                calories = Math.round((foodItem.calories * quantity) / 100);
            } else {
                // Use AI to get calories
                try {
                    const aiCalories = await getCaloriesFromAI(foodName, quantity);
                    calories = aiCalories;
                } catch (error) {
                    // Fallback estimation
                    calories = Math.round(quantity * 2); // Basic estimation
                }
            }
            
            // Add to daily data
            dailyData.foods.push({ name: foodName, quantity, calories, time: new Date().toLocaleTimeString() });
            dailyData.calories.consumed += calories;
            
            // Update display
            updateCalorieDisplay();
            updateFoodHistory();
            
            // Clear inputs
            document.getElementById('foodSearch').value = '';
            document.getElementById('foodQuantity').value = '';
            
            showNotification(`Added ${foodName}: ${calories} calories`);
        }

        // Exercise Functions
        function searchExercise(query) {
            const results = document.getElementById('exerciseResults');
            if (query.length < 2) {
                results.style.display = 'none';
                return;
            }
            
            const matches = exerciseDatabase.filter(exercise => 
                exercise.name.toLowerCase().includes(query.toLowerCase())
            ).slice(0, 10);
            
            results.innerHTML = matches.map(exercise => 
                `<div class="search-item" onclick="selectExercise('${exercise.name}', ${exercise.caloriesPerMin})">${exercise.name} - ${exercise.caloriesPerMin} cal/min</div>`
            ).join('');
            
            results.style.display = matches.length > 0 ? 'block' : 'none';
        }

        function selectExercise(name, caloriesPerMin) {
            document.getElementById('exerciseSearch').value = name;
            document.getElementById('exerciseResults').style.display = 'none';
            
            window.selectedExercise = { name, caloriesPerMin };
        }

        async function addExercise() {
            const exerciseName = document.getElementById('exerciseSearch').value;
            const duration = parseInt(document.getElementById('exerciseDuration').value);
            
            if (!exerciseName || !duration) {
                showNotification('Please enter exercise name and duration');
                return;
            }
            
            let calories = 0;
            
            // Check if exercise is in database
            const exerciseItem = exerciseDatabase.find(e => e.name.toLowerCase() === exerciseName.toLowerCase());
            if (exerciseItem) {
                calories = Math.round(exerciseItem.caloriesPerMin * duration);
            } else {
                // Use AI to get calories
                try {
                    const aiCalories = await getExerciseCaloriesFromAI(exerciseName, duration);
                    calories = aiCalories;
                } catch (error) {
                    // Fallback estimation
                    calories = Math.round(duration * 5); // Basic estimation
                }
            }
            
            // Add to daily data
            dailyData.exercises.push({ name: exerciseName, duration, calories, time: new Date().toLocaleTimeString() });
            dailyData.calories.burned += calories;
            
            // Update display
            updateCalorieDisplay();
            updateWorkoutHistory();
            
            // Clear inputs
            document.getElementById('exerciseSearch').value = '';
            document.getElementById('exerciseDuration').value = '';
            
            showNotification(`Added ${exerciseName}: ${calories} calories burned`);
        }

        // AI Integration Functions
        async function getCaloriesFromAI(foodName, quantity) {
            try {
                const response = await fetch(GEMINI_API_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{
                                text: `How many calories are in ${quantity} grams of ${foodName}? Please respond with just the number of calories.`
                            }]
                        }]
                    })
                });
                
                const data = await response.json();
                const text = data.candidates[0].content.parts[0].text;
                const calories = parseInt(text.match(/\d+/)[0]);
                return calories || Math.round(quantity * 2);
            } catch (error) {
                console.error('AI API error:', error);
                return Math.round(quantity * 2);
            }
        }

        async function getExerciseCaloriesFromAI(exerciseName, duration) {
            try {
                const response = await fetch(GEMINI_API_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{
                                text: `How many calories does a person burn doing ${exerciseName} for ${duration} minutes? Please respond with just the number of calories.`
                            }]
                        }]
                    })
                });
                
                const data = await response.json();
                const text = data.candidates[0].content.parts[0].text;
                const calories = parseInt(text.match(/\d+/)[0]);
                return calories || Math.round(duration * 5);
            } catch (error) {
                console.error('AI API error:', error);
                return Math.round(duration * 5);
            }
        }

        // Water Tracker Functions
        function initWaterTracker() {
            const tracker = document.getElementById('waterTracker');
            tracker.innerHTML = '';
            
            for (let i = 0; i < 8; i++) {
                const glass = document.createElement('div');
                glass.className = 'water-glass';
                glass.onclick = () => toggleWaterGlass(i);
                tracker.appendChild(glass);
            }
            updateWaterDisplay();
        }

        function toggleWaterGlass(index) {
            const glasses = document.querySelectorAll('.water-glass');
            
            if (index < dailyData.water) {
                // Remove water
                for (let i = index; i < 8; i++) {
                    glasses[i].classList.remove('filled');
                }
                dailyData.water = index;
            } else {
                // Add water
                for (let i = 0; i <= index; i++) {
                    glasses[i].classList.add('filled');
                }
                dailyData.water = index + 1;
            }
            updateWaterDisplay();
        }

        function addWater() {
            if (dailyData.water < 8) {
                dailyData.water++;
                updateWaterDisplay();
                const glasses = document.querySelectorAll('.water-glass');
                glasses[dailyData.water - 1].classList.add('filled');
                showNotification('Water glass added!');
            }
        }

        function resetWater() {
            dailyData.water = 0;
            document.querySelectorAll('.water-glass').forEach(glass => {
                glass.classList.remove('filled');
            });
            updateWaterDisplay();
            showNotification('Water intake reset!');
        }

        function updateWaterDisplay() {
            document.getElementById('waterCount').textContent = dailyData.water;
        }

        // Step Counter Functions
        function startStepCounter() {
            if ('DeviceMotionEvent' in window) {
                window.addEventListener('devicemotion', handleMotion);
                showNotification('Step counter started!');
            } else {
                // Simulate steps for demo
                simulateSteps();
            }
        }

        function handleMotion(event) {
            const acceleration = event.accelerationIncludingGravity;
            const totalAcceleration = Math.sqrt(
                acceleration.x * acceleration.x +
                acceleration.y * acceleration.y +
                acceleration.z * acceleration.z
            );
            
            if (totalAcceleration > 15) {
                stepCounter++;
                dailyData.steps = stepCounter;
                updateStepDisplay();
            }
        }

        function simulateSteps() {
            setInterval(() => {
                if (Math.random() > 0.7) {
                    stepCounter++;
                    dailyData.steps = stepCounter;
                    updateStepDisplay();
                }
            }, 2000);
        }

        function resetSteps() {
            stepCounter = 0;
            dailyData.steps = 0;
            updateStepDisplay();
            showNotification('Steps reset!');
        }

        function updateStepDisplay() {
            document.getElementById('stepCount').textContent = dailyData.steps;
            const stepCalories = Math.round(dailyData.steps * 0.04);
            document.getElementById('stepCalories').textContent = stepCalories;
        }

        // BMI Calculator
        function calculateBMI() {
            if (!userData.height || !userData.weight) {
                showNotification('Please set your height and weight in profile first');
                return;
            }
            
            const heightM = userData.height / 100;
            const bmi = userData.weight / (heightM * heightM);
            
            let category = '';
            if (bmi < 18.5) category = 'Underweight';
            else if (bmi < 25) category = 'Normal';
            else if (bmi < 30) category = 'Overweight';
            else category = 'Obese';
            
            document.getElementById('bmiValue').textContent = bmi.toFixed(1);
            document.getElementById('bmiCategory').textContent = category;
            
            showNotification(`Your BMI is ${bmi.toFixed(1)} (${category})`);
        }

        // Scanner Functions
        function startScanner() {
            if (!html5QrCode) {
                html5QrCode = new Html5Qrcode("qr-reader");
            }
            
            const qrConfig = { fps: 10, qrbox: { width: 250, height: 250 } };
            
            html5QrCode.start(
                { facingMode: "environment" },
                qrConfig,
                (decodedText, decodedResult) => {
                    showNotification(`Scanned: ${decodedText}`);
                    // Process barcode for food lookup
                    lookupFoodByBarcode(decodedText);
                },
                (errorMessage) => {
                    console.log(`QR scan error: ${errorMessage}`);
                }
            ).catch(err => {
                console.error(`Unable to start scanning: ${err}`);
                showNotification('Camera access denied or not available');
            });
        }

        function stopScanner() {
            if (html5QrCode) {
                html5QrCode.stop().then(() => {
                    showNotification('Scanner stopped');
                }).catch(err => {
                    console.error('Error stopping scanner:', err);
                });
            }
        }

        function lookupFoodByBarcode(barcode) {
            // This would typically call a food database API
            showNotification('Food lookup feature coming soon!');
        }

        // Workout Plan Functions
        function showWorkoutPlan(plan) {
            document.getElementById('pplPlan').style.display = plan === 'ppl' ? 'block' : 'none';
            document.getElementById('broPlan').style.display = plan === 'bro' ? 'block' : 'none';
            
            // Update active tab
            event.target.parentElement.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        function showDietPlan(plan) {
            document.getElementById('fatlossDiet').style.display = plan === 'fatloss' ? 'block' : 'none';
            document.getElementById('muscleDiet').style.display = plan === 'muscle' ? 'block' : 'none';
            document.getElementById('proteinDiet').style.display = plan === 'protein' ? 'block' : 'none';
            
            // Update active tab
            event.target.parentElement.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        // Display Update Functions
        function updateCalorieDisplay() {
            document.getElementById('caloriesConsumed').textContent = dailyData.calories.consumed;
            document.getElementById('caloriesBurned').textContent = dailyData.calories.burned;
            document.getElementById('netCalories').textContent = dailyData.calories.consumed - dailyData.calories.burned;
        }

        function updateFoodHistory() {
            const history = document.getElementById('foodHistory');
            history.innerHTML = dailyData.foods.map(food => 
                `<div class="history-item">
                    <div>
                        <strong>${food.name}</strong><br>
                        ${food.quantity}g - ${food.calories} cal<br>
                        <small>${food.time}</small>
                    </div>
                    <button class="btn btn-secondary" onclick="removeFood(${dailyData.foods.indexOf(food)})">Remove</button>
                </div>`
            ).join('');
        }

        function updateWorkoutHistory() {
            const history = document.getElementById('workoutHistory');
            history.innerHTML = dailyData.exercises.map(exercise => 
                `<div class="history-item">
                    <div>
                        <strong>${exercise.name}</strong><br>
                        ${exercise.duration} min - ${exercise.calories} cal<br>
                        <small>${exercise.time}</small>
                    </div>
                    <button class="btn btn-secondary" onclick="removeExercise(${dailyData.exercises.indexOf(exercise)})">Remove</button>
                </div>`
            ).join('');
        }

        function removeFood(index) {
            const food = dailyData.foods[index];
            dailyData.calories.consumed -= food.calories;
            dailyData.foods.splice(index, 1);
            updateCalorieDisplay();
            updateFoodHistory();
            showNotification('Food item removed');
        }

        function removeExercise(index) {
            const exercise = dailyData.exercises[index];
            dailyData.calories.burned -= exercise.calories;
            dailyData.exercises.splice(index, 1);
            updateCalorieDisplay();
            updateWorkoutHistory();
            showNotification('Exercise removed');
        }

        // Chart Functions
        function initChart() {
            const ctx = document.getElementById('calorieChart');
            if (!ctx) return;
            
            if (chart) {
                chart.destroy();
            }
            
            const data = {
                labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                datasets: [
                    {
                        label: 'Calories Consumed',
                        data: [2200, 2100, 2300, 2000, 2400, 2500, dailyData.calories.consumed],
                        borderColor: '#ff6b6b',
                        backgroundColor: 'rgba(255, 107, 107, 0.1)',
                        fill: true
                    },
                    {
                        label: 'Calories Burned',
                        data: [500, 600, 400, 700, 550, 800, dailyData.calories.burned],
                        borderColor: '#4ecdc4',
                        backgroundColor: 'rgba(78, 205, 196, 0.1)',
                        fill: true
                    }
                ]
            };
            
            chart = new Chart(ctx, {
                type: 'line',
                data: data,
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            labels: { color: 'white' }
                        }
                    },
                    scales: {
                        x: { ticks: { color: 'white' } },
                        y: { ticks: { color: 'white' } }
                    }
                }
            });
        }

        // Theme Functions
        function setTheme(theme) {
            const body = document.body;
            body.className = theme;
            
            document.querySelectorAll('.theme-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            const themes = {
                gradient: 'linear-gradient(135deg, #667eea 0%, #764ba2 25%, #f093fb 50%, #f5576c 75%, #4facfe 100%)',
                dark: 'linear-gradient(135deg, #232526 0%, #414345 100%)',
                ocean: 'linear-gradient(135deg, #667db6 0%, #0082c8 25%, #0052d4 50%, #4facfe 75%, #00c9ff 100%)'
            };
            
            body.style.background = themes[theme];
            body.style.backgroundSize = '400% 400%';
            body.style.animation = 'gradientShift 15s ease infinite';
        }

        // Notification Function
        function showNotification(message) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.style.display = 'block';
            
            setTimeout(() => {
                notification.style.display = 'none';
            }, 3000);
        }

        // Initialize App
        function init() {
            loadProfile();
            initWaterTracker();
            updateCalorieDisplay();
            updateFoodHistory();
            updateWorkoutHistory();
            updateStepDisplay();
            
            // Load saved data
            const savedData = localStorage.getItem('ankitfit_daily');
            if (savedData) {
                dailyData = { ...dailyData, ...JSON.parse(savedData) };
                updateCalorieDisplay();
                updateFoodHistory();
                updateWorkoutHistory();
                updateStepDisplay();
                updateWaterDisplay();
            }
            
            // Save data periodically
            setInterval(() => {
                localStorage.setItem('ankitfit_daily', JSON.stringify(dailyData));
            }, 30000);
        }

        // Start app when page loads
        document.addEventListener('DOMContentLoaded', init);

        // Hide search results when clicking outside
        document.addEventListener('click', (e) => {
            if (!e.target.closest('.search-container')) {
                document.querySelectorAll('.search-results').forEach(results => {
                    results.style.display = 'none';
                });
            }
        });
    </script>
</body>
</html>
